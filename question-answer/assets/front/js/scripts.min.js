jQuery(document).ready(function(a){a(document).on("click",".qa-breadcrumb .menu-box",function(){a(".qa-breadcrumb .menu-box .menu-box-hover").fadeIn()});jQuery(".submit_answer_button").mousedown(function(){tinyMCE.triggerSave()});a(document).on("click",".admin_actions_submit",function(){a(this).html("<i class='fas fa-cog fa-spin'></i>");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_admin_actions_submit",form_data:a(this).parent().serializeArray()},success:function(b){if(b.length>0){window.location.href=b}}})});a(document).on("click",".submit_answer_button",function(){__html__=a(this).html();form_data=a(".form-answer-post").serializeArray();current_url=window.location.href;url_arr=current_url.split("#");last_char=url_arr[0].substr(url_arr[0].length-1);current_url=last_char=="/"?url_arr[0].slice(0,-1):url_arr[0];console.log(form_data);a(this).html("<i class='fas fa-cog fa-spin'></i>");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_answer_posting",form_data:form_data},success:function(b){var c=JSON.parse(b);a(".form-answer-post .answer_posting_notice").html(c.html);a(this).html(__html__);if(c.answer_id){window.location.href=current_url+"#single-answer-"+c.answer_id}}})});a(document).on("click",".qa-load-comments",function(b){b.preventDefault();total_comments=parseInt(a(this).attr("total_comments"));per_page=parseInt(a(this).attr("per_page"));paged=parseInt(a(this).attr("paged"));post_id=parseInt(a(this).attr("post_id"));a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_load_more_comments",post_id:post_id,paged:paged,per_page:per_page,total_comments:total_comments},success:function(c){var d=JSON.parse(c);html_output=d.html_output;has_comment=d.has_comment;comment_remain_count=d.comment_remain_count;a(".qa-answer-comment-reply-"+post_id).append(html_output);a(".qa-question-comment-reply-"+post_id).append(html_output);a(this).children(".count").text(comment_remain_count);if(has_comment=="no"||comment_remain_count<=0){a(this).fadeOut("slow")}a(this).attr("paged",(paged+1));setTimeout(function(){a(".qa-answer-comment-reply .qa-single-comment").removeClass("loading");a(".qa-question-comment-reply .qa-single-comment").removeClass("loading")},1000)}})});a(document).on("click",".update_answer_button",function(){__html__=a(this).html();form_data=a(".form-answer-post").serializeArray();current_url=window.location.href;url_arr=current_url.split("#");last_char=url_arr[0].substr(url_arr[0].length-1);current_url=last_char=="/"?url_arr[0].slice(0,-1):url_arr[0];console.log(form_data);a(this).html("<i class='fas fa-cog fa-spin'></i>");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_answer_update",form_data:form_data},success:function(b){var c=JSON.parse(b);url=c.url;console.log(c.answer_id);a(".form-answer-post .answer_posting_notice").html(c.html);a(this).html(__html__);if(c.answer_id){window.location.href=url}}})});a(document).on("click",".load-notifications",function(){var b=parseInt(a(this).attr("pagenum"));a(this).addClass("loading");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_load_more_notifications",pagenum:b},success:function(d){var f=JSON.parse(d);var e=f.html;var c=f.has_notification;if(c=="yes"){a(".notification-list .list-items").append(e);a(this).attr("pagenum",parseInt(b+1))}else{a(this).html("No more notification.")}a(this).removeClass("loading")}})});a(document).on("mouseleave",".qa-breadcrumb .menu-box",function(){a(".qa-breadcrumb .menu-box .menu-box-hover").fadeOut()});a(document).on("click",".qa-polls li",function(){data_id=a(this).attr("data-id");q_id=a(this).attr("q_id");a(".qa-polls li").removeClass("active");if(a(this).hasClass("active")){a(this).removeClass("active")}else{a(this).addClass("active")}a(".poll-result").fadeIn();a(".poll-result .loading").fadeIn();a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_poll",data_id:data_id,q_id:q_id},success:function(e){var b=JSON.parse(e);var d=b.html;var c=b.error;a(".poll-result .results").html(d);a(".poll-result .loading").fadeOut();if(c){a(".toast").text(c);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400);return}}})});a(".questions-archive #keyword").autocomplete({classes:{"ui-autocomplete":"highlight"},source:function(c,b){console.log(c);a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_get_keyword_suggestion",keyword:c},success:function(d){d=JSON.parse(d);b(d)}})}});a(document).on("keyup",".question-submit #post_title",function(){a(this).attr("autocomplete","off");title=a(this).val();a(".suggestion-title, .loading").fadeIn();a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_question_suggestion",title:title},success:function(b){a(".suggestions-list").html(b);a(".loading").fadeOut()}})});a(document).on("click",".mark-all-read",function(){a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_notify_mark_all_read"},success:function(c){var b=JSON.parse(c);status=b.status;if(status=="yes"){a(this).html("Marked all as read")}}})});a(document).on("click",".notify-mark",function(){var b=a(this).attr("notify_id");bubble_count=parseInt(a(".count").text());if(bubble_count==1){a(".count").fadeOut()}a(this).html('<i class="fas fa-spinner fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_notify_mark",notify_id:b},success:function(d){var c=JSON.parse(d);status=c.status;icon=c.icon;console.log(status);if(status=="read"){bubble_count=(bubble_count-1);a(".count").text(bubble_count);a(this).html(icon);a(this).parent().parent().toggleClass("unread")}else{if(status=="unread"){a(this).html(icon);bubble_count=(bubble_count+1);a(".count").text(bubble_count);a(this).parent().parent().toggleClass("unread")}}}})});a(document).on("click",".qa-best-answer",function(){a(this).find("i").addClass("fa-spin");var b=a(this).attr("answer_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_best_answer",answer_id:b},success:function(d){var c=JSON.parse(d);a(this).find("i").removeClass("fa-spin");a("body").find(".best_answer").removeClass("best_answer");a(".all-single-answer").find(".single-answer").removeClass("list_best_answer");if(c.status=="updated"){a(this).addClass("best_answer");a("#single-answer-"+b).addClass("list_best_answer")}a(".toast").html(c.toast);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".qa-featured",function(){_HTML=a(this).html();var b=a(this).attr("post_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_featured_switch",post_id:b},success:function(d){var c=JSON.parse(d);if(a(this).hasClass("qa-featured-yes")){a(this).removeClass("qa-featured-yes");a(this).addClass(c.featured_class)}if(a(this).hasClass("qa-featured-no")){a(this).removeClass("qa-featured-no");a(this).addClass(c.featured_class)}a(".toast").html(c.toast);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".qa-breadcrumb .bubble ",function(){if(a(this).hasClass("pending")){a(this).removeClass("pending");a(this).addClass("hide")}});a(document).on("change",".qa_sort_answer",function(){a("#qa_sort_answer_form").submit()});a(document).on("click",".qa_load_more",function(){var d=a(this).attr("_paged");var c=a(this).attr("_answer_id");var b=a(this).html();a(this).html('<i class="fas fa-asterisk fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_load_more_answer",_paged:d,_answer_id:c},success:function(g){if(g.length>0){d++;a(".all-single-answer").append(g);a(this).attr("_paged",d);var f=d+1;var e=a(".single-answer:nth-child("+f+")").attr("id");a("html, body").animate({scrollTop:a("#"+e).offset().top},2000)}a(this).html(b)}})});a(document).on("click",".qa-add-comment",function(){a(this).fadeOut();a(".qa-comment-form").fadeIn();a(".qa-cancel-comment").fadeIn()});a(document).on("click",".qa-cancel-comment",function(){a(this).fadeOut();a(".qa-comment-form").fadeOut();a(".qa-add-comment").fadeIn()});a(document).on("click",".qa_answer_voted ",function(){a(".all-single-answer .single-answer").each(function(b){if(!a(this).hasClass("reviewd")){a(this).fadeOut()}})});a(document).on("click",".qa_answer_all ",function(){a(".all-single-answer .single-answer").each(function(b){a(this).fadeIn()})});a(document).on("click",".qa-comment-action",function(){var d=a(this).attr("status");if(d==0){return}var c=a(this).attr("comment_id");var b=a(this).attr("user_id");var e=a(this).attr("action");a(this).html('<i class="fas fa-cog red fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_do_comment_flag_action",act:e,comment_id:c,user_id:b},success:function(f){if(e=="flag"){a(this).attr("action","unflag")}if(e=="unflag"){a(this).attr("action","flag")}a(this).html(f)}})});a(document).on("click",".qa-comment-flag-action",function(){a(this).children(".waiting").fadeIn();var b=a(this).attr("comment_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_comment_flag",comment_id:b},success:function(g){var e=JSON.parse(g);var d=e.flag_text;var h=e.is_error;var f=e.message;var c=e.flag_count;a(this).children(".flag-text").html(d);a(this).children(".flag-count").html("("+c+")");a(this).children(".waiting").fadeOut();a(".toast").text(f);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".comment-vote-action",function(){a(this).parent().children(".comment-vote-action").removeClass("comment-votted");a(this).parent().children(".comment-vote-count").html('<i class="fas fa-cog fa-spin"></i>');var b=a(this).attr("vote_type");var c=a(this).attr("comment_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_comment_vote",comment_id:c,vote_type:b},success:function(f){var d=JSON.parse(f);var h=d.is_error;var e=d.message;var g=d.vote_count;if(h=="no"){a(this).addClass("comment-votted")}a(this).parent().children(".comment-vote-count").html(g);a(".toast").text(e);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400);console.log(g)}})});a(document).on("click",".qa-flag-action",function(){a(this).children(".waiting").fadeIn();var b=a(this).attr("post_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_post_flag",post_id:b},success:function(g){var e=JSON.parse(g);var d=e.flag_text;var h=e.is_error;var f=e.message;var c=e.flag_count;a(this).children(".flag-text").html(d);a(this).children(".flag-count").html("("+c+")");a(this).children(".waiting").fadeOut();a(".toast").text(f);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("mouseover",".qa-user-card-loader",function(){var b=a(this).attr("author_id");var c=a(this).attr("has_loaded");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_user_card",author_id:b},success:function(d){a(this).children(".qa-user-card").children(".card-loading").fadeOut();var f=JSON.parse(d);var e=f.html;a(this).children(".qa-user-card").children(".card-data").html(e);a(this).attr("has_loaded","yes")}})});a(document).on("click",".qa-follow",function(){var b=a(this).attr("author_id");a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_ajax_user_follow",author_id:b},success:function(d){var c=JSON.parse(d);toast_html=c.toast_html;action=c.action;if(action=="unfollow"){if(a(this).hasClass("following")){a(this).removeClass("following")}a(this).text("Follow");a(this).addClass(action)}else{if(action=="following"){if(a(this).hasClass("unfollow")){a(this).removeClass("unfollow")}a(this).text("Following");a(this).addClass(action)}else{}}console.log(c);a(".toast").html(toast_html);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".answer-post-header",function(){var b=a(this).attr("_status");if(b==1){a(".apost_header_status").removeClass("fa-compress");a(".apost_header_status").addClass("fa-expand");a(".answer-post form").fadeOut();a(this).attr("_status","0")}else{a(".apost_header_status").addClass("fa-compress");a(".apost_header_status").removeClass("fa-expand");a(".answer-post form").fadeIn();a(this).attr("_status","1")}});a(document).on("click",".qa-answer-reply",function(){var b=a(this).attr("post_id");a(".qa-reply-popup-"+b).fadeIn()});a(document).on("click",".qa-reply-popup .close",function(){a(".qa-reply-popup").fadeOut()});a(document).on("click",".qa-subscribe",function(){var b=a(this).attr("post_id");var c=a(this).html();a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_subscribe_action",post_id:b},success:function(e){var d=JSON.parse(e);subscribe_class=d.subscribe_class;if(subscribe_class=="not-subscribed"){a(this).removeClass("subscribed");a(this).addClass("not-subscribed")}else{if(subscribe_class=="subscribed"){a(this).removeClass("not-subscribed");a(this).addClass("subscribed")}}a(".toast").text(d.toast);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".qa-is-solved",function(){var b=a(this).attr("post_id");var c=a(this).html();a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_is_solved_action",post_id:b},success:function(e){var d=JSON.parse(e);is_solved=d.is_solved;if(is_solved=="solved"){a(this).removeClass("unsolved");a(this).addClass("solved")}else{if(is_solved=="unsolved"){a(this).removeClass("solved");a(this).addClass("unsolved")}}a(".toast").text(d.toast);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400)}})});a(document).on("click",".qa-reply-form-submit",function(){var b=a(this).attr("id");var c=a("#qa-answer-reply-"+b).val();if(c.length===0){a(this).prev("textarea").css("border","1px solid red");a(".toast").text("Empty data !");a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400);return}var d=a(this).html();a(this).html('<i class="fas fa-cog red fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_answer_reply_action",post_id:b,reply_msg:c},success:function(e){a(this).prev("textarea").val("");a(".qa-reply-popup").fadeOut();a(".qa-answer-comment-reply-"+b).append(e);a(".qa-question-comment-reply-"+b).append(e);a(this).html(d)}})});a(document).on("click",".qa-thumb-down",function(){var b=a(this).attr("post_id");var c=a(this).html();a(this).html('<i class="fas fa-cog fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_answer_thumbsdown_action",post_id:b},success:function(g){a(this).html(c);var e=JSON.parse(g);var h=e.review_value;var f=e.error;var d=e.status;if(f){a(".toast").text(f);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400);return}a(".net-vote-count-"+b).text(h);_ID="#"+a(this).parent().parent().attr("id");a(".qa-single-vote-"+b+" .qa-thumb-up").removeClass("votted");a(".qa-single-vote-"+b+" .qa-thumb-down").removeClass("votted");a(".qa-single-vote-"+b+" .qa-thumb-down").removeClass("votted");(d=="up")?a(".qa-single-vote-"+b+" .qa-thumb-down").addClass("votted"):a(".qa-single-vote-"+b+" .qa-thumb-up").addClass("votted")}})});a(document).on("click",".qa-thumb-up",function(){var b=a(this).attr("post_id");var c=a(this).html();a(this).html('<i class="fas fa-cog fa-spin"></i>');a.ajax({type:"POST",context:this,url:qa_ajax.qa_ajaxurl,data:{action:"qa_answer_thumbsup_action",post_id:b},success:function(g){a(this).html(c);var e=JSON.parse(g);var h=e.review_value;var f=e.error;var d=e.status;if(f){a(".toast").text(f);a(".toast").stop().fadeIn(400).delay(3000).fadeOut(400);return}a(".net-vote-count-"+b).text(h);a(".qa-single-vote-"+b+" .qa-thumb-up").removeClass("votted");a(".qa-single-vote-"+b+" .qa-thumb-down").removeClass("votted");(d=="up")?a(".qa-single-vote-"+b+" .qa-thumb-down").addClass("votted"):a(".qa-single-vote-"+b+" .qa-thumb-up").addClass("votted")}})})});